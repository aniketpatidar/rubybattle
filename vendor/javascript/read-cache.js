import t from"fs";import e from"path";import r from"pify";import n from"buffer";var c={};var o=n.Buffer;var i=t;var m=e;var a=r;var u=a(i.stat);var v=a(i.readFile);var f=m.resolve;var l=Object.create(null);function convert(t,e){return o.isEncoding(e)?t.toString(e):t}c=function(t,e){t=f(t);return u(t).then((function(r){var n=l[t];return n&&n.mtime.getTime()===r.mtime.getTime()?convert(n.content,e):v(t).then((function(n){l[t]={mtime:r.mtime,content:n};return convert(n,e)}))})).catch((function(e){l[t]=null;return Promise.reject(e)}))};c.sync=function(t,e){t=f(t);try{var r=i.statSync(t);var n=l[t];if(n&&n.mtime.getTime()===r.mtime.getTime())return convert(n.content,e);var c=i.readFileSync(t);l[t]={mtime:r.mtime,content:c};return convert(c,e)}catch(e){l[t]=null;throw e}};c.get=function(t,e){t=f(t);return l[t]?convert(l[t].content,e):null};c.clear=function(){l=Object.create(null)};var s=c;const g=c.sync,p=c.get,h=c.clear;export default s;export{h as clear,p as get,g as sync};

